# h5 Koko juttu

## Työskentely-ympäristö

MacOS Sonoma Versio 14.2.1
MacBookPro 13-tuumainen, 2020
Prosessori: 1,4 GHz Neliytiminen Intel Core i5
Näytönohjain: Intel Iris Plus Graphics 645, 1536 Mt
Muisti: 8 Gt 2133 MHz LPDDR3

## a) Asenna uusi, tyhjä virtuaalikone. Tee koneelle tavalliset alkutoimet. Asenna sille Apache-weppipalvelin ja SSH-etähallintapalvelin. Tee uusi etusivu weppipalvelimelle niin, että sivuja voi muokata normaalikäyttäjän oikeuksin. Käytä tässä name based virtual host -tekniikkaa. 21.2.2024 klo 11.28-

### VIRTUAALIKONE

Avasin VirtualBoxin ja aloitin klikkaamalla yläpalkista "Machine" ja "New". 

<img width="585" alt="1UusiVM" src="https://github.com/HannaBurman/koulutyot/assets/156779955/78d5d6d6-a933-49a3-9c45-803067f39552">

Täytin tarvittavat tiedot ja laitoin täpän kohtaan "Skip Unattended Installation". 

<img width="921" alt="2asennus" src="https://github.com/HannaBurman/koulutyot/assets/156779955/6c551f32-5123-43f2-8983-f215bbdbbba1">

Hardware kohdassa lisäsin "Base Memorya" -> 4000 MB ja "Processors" 1 -> 2.

<img width="921" alt="3asennus" src="https://github.com/HannaBurman/koulutyot/assets/156779955/6d9ece4d-5a7e-4ecb-8f5e-7135ab47db3c">

"Hard Diskin" kokoa kasvatin -> 60 GB ja painoin tämän jälkeen "Finish". 

<img width="921" alt="4asennus" src="https://github.com/HannaBurman/koulutyot/assets/156779955/d8e6c91a-e9ab-49f3-bc34-cbfbabdf89b6">

"Boot Menussa" painoin "Enter". 

<img width="627" alt="5asennus" src="https://github.com/HannaBurman/koulutyot/assets/156779955/ef205ed0-c1e0-4a4f-aff6-1f66e763fc9c">

Kun pääsin sisälle, testasin ensin selaimen toimivuuden. 

<img width="777" alt="7 asennus" src="https://github.com/HannaBurman/koulutyot/assets/156779955/4236ef61-7275-4556-bbee-67a6b48153ab">

Tämän jälkeen klikkasin työpöydällä olevaan "Istall Debian" -kuvaketta ja ruudulle tuli huomioruudussa kysyttiin luotanko ohjelmaan ja haluanko varmasti jatkaa, klikkasin "Launch Anyway".

<img width="777" alt="8asennus" src="https://github.com/HannaBurman/koulutyot/assets/156779955/639ab809-9bb7-47c7-9953-039c78018465">

Debianin Installerissa valitsin kieleksi "American English".

<img width="777" alt="9asennus" src="https://github.com/HannaBurman/koulutyot/assets/156779955/6048054a-c207-46c4-aac7-8db38a9639b1">

Regioniksi valitsin "Europe" ja kaupungiksi "Helsinki". 

<img width="815" alt="10asennus" src="https://github.com/HannaBurman/koulutyot/assets/156779955/925414cd-7b51-4373-a9d3-4f9b8b46da76">

Keyboardissa valitsin "MacBook/MacBook Pro (intl.)", kieleksi "Finnish" ja "Default". 

<img width="783" alt="11asennus" src="https://github.com/HannaBurman/koulutyot/assets/156779955/cd4eb518-a19b-466a-84c6-cabdf64fa559">

"Partitions" -kohdassa vlitsin "Erase Disk".

<img width="815" alt="12asennus" src="https://github.com/HannaBurman/koulutyot/assets/156779955/439797a9-3f3b-4c54-98c9-981a394c2afc">

Sitten annoin tietoni ja painoin "Next". 

<img width="815" alt="13asennus" src="https://github.com/HannaBurman/koulutyot/assets/156779955/d38c3dc3-c74e-4f34-9dc5-8b5b622ac3e0">

Seuraavaksi tietojen summaus ja "Install".

<img width="815" alt="14asennus" src="https://github.com/HannaBurman/koulutyot/assets/156779955/6a9342ab-bdb2-4829-a84b-2037f7110f0c">

Lataa.

<img width="783" alt="15asennus" src="https://github.com/HannaBurman/koulutyot/assets/156779955/86c0bca4-3715-49c0-9c9e-50b3203b4c83">

"All Done"!

<img width="783" alt="16asennus" src="https://github.com/HannaBurman/koulutyot/assets/156779955/61dbfbd6-ce18-416f-a549-89ba43bc4492">

Salasanalla sisälle. 

<img width="783" alt="17asennus" src="https://github.com/HannaBurman/koulutyot/assets/156779955/321025c2-746d-4063-b772-3a57dae3b78f">

### APACHE, UFW, NANO JA SSH

Seuraavaksi vuorossa Apachen asennus. Avasin terminaalin ja annoin komennot

    $ sudo apt-get update
    $ sudo apt-get install apache2

<img width="781" alt="Näyttökuva 2024-2-21 kello 13 27 29" src="https://github.com/HannaBurman/koulutyot/assets/156779955/97c5a11c-7245-4dbc-91a5-02708f484461">
<img width="815" alt="14asennus" src="https://github.com/HannaBurman/koulutyot/assets/156779955/6a9342ab-bdb2-4829-a84b-2037f7110f0c">

Tsekkasin vielä Apachen statuksen komennolla 

    $ sudo systemctl status apache2

<img width="787" alt="Näyttökuva 2024-2-21 kello 13 38 04" src="https://github.com/HannaBurman/koulutyot/assets/156779955/d062c30d-2bd6-4244-abc3-01705bbac5b7">

localhostissa (http://localhost) näytti tältä, eli toistaiseksi all good. 

<img width="787" alt="Näyttökuva 2024-2-21 kello 13 30 31" src="https://github.com/HannaBurman/koulutyot/assets/156779955/150182e0-3be4-4483-af1c-de74cf59058d">

Seuraavaksi asensin firewallin komennolla

    $ sudo apt install ufw

<img width="767" alt="Näyttökuva 2024-2-21 kello 13 45 01" src="https://github.com/HannaBurman/koulutyot/assets/156779955/b424dc8d-6939-43cf-a003-a50354e2c8bc">
<img width="767" alt="Näyttökuva 2024-2-21 kello 13 45 20" src="https://github.com/HannaBurman/koulutyot/assets/156779955/cb355933-6737-4977-957d-b161a63aba1f">

Ja sitten asensin Nanon. 

   $ sudo apt install nano

<img width="633" alt="Näyttökuva 2024-2-21 kello 13 46 29" src="https://github.com/HannaBurman/koulutyot/assets/156779955/883ea027-c0f7-4488-862d-d002d43c43e4">

Sitten asensin SSH-etäpalvelimen komennoilla

    $sudo apt-get install openssh-server

<img width="781" alt="Näyttökuva 2024-2-21 kello 13 50 04" src="https://github.com/HannaBurman/koulutyot/assets/156779955/75d5958a-cf0a-4fbd-8441-f98277977de1">

Ja tsekkasin vielä statuksen komennolla

    $ sudo systemctl status ssh

Hyvin toimii.

<img width="781" alt="Näyttökuva 2024-2-21 kello 13 51 28" src="https://github.com/HannaBurman/koulutyot/assets/156779955/ba84aa81-f300-4146-a35b-9e73e7d724a9">

### WEPPIPALVELIMEN ETUSIVU




## b) Pubkey. Automatisoi kirjautuminen julkisella SSH-avaimella.
## c) Digging host. Tutki domain-nimesi nimesi tietoja 'host' ja 'dig' -komennoilla. Analysoi tulokset. Vertaa tuloksia nimen vuokraajan (namecheap.com, name.com...) weppiliittymässä näkyviin asetuksiin. (Jos sinulla ei ole omaa nimeä käytössä, voit tutkia jotain muuta nimeä).
## m) Vapaaehtoinen: Asenna vagrant, asenna sillä uusi virtuaalikone.

## Lähteet

- ChatGpt 2024. Käytety 9.2.2024.
- DigitalOcean 2024. Luettavissa: www.digitalocean.com. Luettu 8.2.2024.
- Karvinen, T. 2012. First Steps on a New Virtual Private Server – an Example on DigitalOcean and Ubuntu 16.04 LTS. Luettavissa: https://terokarvinen.com/2017/first-steps-on-a-new-virtual-private-server-an-example-on-digitalocean/. Luettu 6.2.2024.
- Lehto, S. 2022. Teoriasta käytäntöön pilvipalvelimen avulla (h4) (opiskelijan esimerkkiraportti), kohdat a,d,e ja f. Luettavissa: https://susannalehto.fi/2022/teoriasta-kaytantoon-pilvipalvelimen-avulla-h4/. Luettu 6.2.2024.
- Namecheap 2024. Luettavissa: www.namecheap.com. Luettu 8.2.2024.
- https://hostman.com/tutorials/how-to-install-and-configure-ssh-on-an-ubuntu-server/

-------------------------------------


Vinkit


On hyvä idea kokeilla koko jutun asentamista useamman kerran. Itse tehtävässä tämä raportoidaan vain kerran. Voit halutessasi tehtävän tehtyäsi kokeilla tätä useamman kerran raportoimatta. Yleensä eka kerta vie tunteja, toka 1-2 h ja kymmenes kerta 15-20 minuttia. Samalla aivokapasiteettia vapautuu nippeleiden ja nappeleiden vahtaamisesta suurempiin ja haastavampiin kysymyksiin.
ssh-keygen, ssh-copy-id
journalctl --since yesterday|grep -i ssh
sudo apt-get -y install bind9-dnsutils bind9-host # asentaa komennot 'host' ja 'dig'
Vagrantilla on todella nopea tehdä ja poistaa virtuaalikoneita. Helpottaa harjoittelua. Ulkomuistista:
Asennus
Asennus Linux: sudo apt-get update; sudo apt-get -y install virtualbox vagrant
Asennus Windows: https://developer.hashicorp.com/vagrant/install?product_intent=vagrant "Windows" "Binary download" "AMD64", kaksoisklikkaus ja eteneminen next-next velhon kanssa
Käyttö
vagrant init debian/bookworm64
vagrant up
vagrant ssh
ja lopuksi, kun haluat tuhota virtuaalikoneen ja kaikki sen sisältämät tiedostot: 'vagrant destroy'
